/*! For license information please see 135.a4267eca8712fb69.js.LICENSE.txt */
(self.webpackChunkpooling_pallet_return=self.webpackChunkpooling_pallet_return||[]).push([[135],{135:(e,t,s)=>{s.d(t,{A:()=>_});var r=s(418),a=s(749),l=s(540);const n=({id:e,value:t,onChange:s,options:r,placeholder:a,className:n,disabled:o})=>(0,l.jsxs)("select",{id:e,className:`custom-select ${n}`,value:t,onChange:s,disabled:o,children:[(0,l.jsx)("option",{value:"",children:a}),!(null==r||!r.length)&&r.map(((e,t)=>(0,l.jsx)("option",{value:e,children:e},t)))]}),o=function({onChange:e}){const{loading:t,formData:s}=function(){const[e,t]=(0,r.useState)(!0),[s,a]=(0,r.useState)({});return(0,r.useEffect)((()=>{(async()=>{try{const e=((e,t)=>{const s={};return e.forEach((e=>{const[r,a,l,...n]=e;r&&a&&l&&(s[r]||(s[r]={}),s[r][a]||(s[r][a]={}),s[r][a][l]={},t.forEach(((e,t)=>{s[r][a][l][e]=n[t]})),s[r][a][l].inputValue=0)})),s})(await fetch("https://sheets.googleapis.com/v4/spreadsheets/1HUCYLt6G0gy7BKOXUpZQ-eM1KHTogk25KvD7MQEovvg/values/Sheet1!A3:F?key=AIzaSyAngsqkvSAnquqd4uHLIxBlHUD_kE5z6yU").then((e=>(e.ok||console.log("Network response was not ok"),e.json()))).then((e=>{if(e&&e.values&&e.values.length>0)return e.values;console.log("Empty data or invalid format returned from Google Sheets")})).catch((e=>{console.log("Error fetching data from Google Sheets:",e)})),["pln","rcs","tariff"]);a(e)}catch(e){console.log(e)}finally{t(!1)}})()}),[]),{loading:e,formData:s}}(),[o,c]=(0,r.useState)(""),[i,_]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[x,j]=(0,r.useState)(""),[N,b]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[y,S]=(0,r.useState)(!1),{regions:C,tradingNetworks:H,returnPoints:V,returnPoint:E}=(0,r.useMemo)((()=>{var e;return{regions:Object.keys(s),tradingNetworks:o?Object.keys(s[o]):[],returnPoints:i?Object.keys(s[o][i]):[],returnPoint:null==(e=s[o])||null==(e=e[i])?void 0:e[u]}}),[s,o,i,u]),P=(t,s)=>{switch(t){case"region":c(s),e(t,s),_(""),p("");break;case"tradingNetwork":_(s),e(t,s),p("");break;case"returnPoint":p(s)}},O='\n    <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M9.39609 7.00004V5.83337V5.59158L6.13788 2.33337H5.89609H4.72942H0.646088V14H9.39609V7.00004ZM7.98763 5.83337H5.89609V3.74183L7.98763 5.83337ZM1.81275 12.8334V3.50004H4.72942V7.00004H8.22942V12.8334H1.81275Z" fill="#135CA9"/>\n    <path d="M10.5628 11.6667V12.8333H14.3544V4.66667V3.5V3.25821L11.0962 0H10.8544H9.68776H5.60443V1.16667H9.68776V4.66667H13.1878V11.6667H10.5628ZM10.8544 1.40846L12.946 3.5H10.8544V1.40846Z" fill="#135CA9"/>\n    </svg>\n  ',T=e=>{navigator.clipboard.writeText(e).then((()=>{alert("Текст скопирован в буфер обмена")})).catch((e=>{console.error("Ошибка при копировании текста: ",e)}))};return(0,r.useEffect)((()=>{f(""),m("")}),[C,H,V]),(0,r.useEffect)((()=>{E&&e("returnPoint",E)}),[E]),(0,l.jsx)("div",{children:t?(0,l.jsx)("div",{className:"loader-container",children:(0,l.jsx)(a.ClipLoader,{color:"#123abc",size:150})}):(0,l.jsxs)("div",{className:"pallet-return-form__wrapper",children:[(0,l.jsxs)("div",{className:"pallet-return-form__group__wrapper",children:[(0,l.jsxs)("div",{className:"pallet-return-form__group",children:[(0,l.jsxs)("div",{className:"pallet-return-form__select-wrapp",children:[(0,l.jsx)("span",{className:"pallet-return-form__select-wrapp__title",children:"Регион"}),(0,l.jsx)(n,{id:"region",value:o,onChange:e=>P("region",e.target.value),options:C,placeholder:"Выберите регион"})]}),(0,l.jsxs)("div",{className:"pallet-return-form__select-wrapp",children:[(0,l.jsx)("span",{className:"pallet-return-form__select-wrapp__title",children:"Торговая сеть"}),(0,l.jsx)(n,{id:"trading-network",value:i,onChange:e=>P("tradingNetwork",e.target.value),options:H,placeholder:"Выберите торговую сеть",disabled:!o})]}),(0,l.jsxs)("div",{className:"pallet-return-form__select-wrapp",children:[(0,l.jsx)("span",{className:"pallet-return-form__select-wrapp__title",children:"Точка возврата"}),(0,l.jsx)(n,{id:"return-point",value:u,onChange:e=>P("returnPoint",e.target.value),options:V,placeholder:"Выберите точку возврата",disabled:!i})]})]}),(0,l.jsx)("div",{className:"pallet-return-form__sum",children:(0,l.jsxs)("div",{className:"pallet-return-form__group__input-wrapper",children:[(0,l.jsx)("span",{className:"pallet-return-form__group__input-desc",children:"Введите кол-во паллет/месяц:"}),(0,l.jsx)("input",{className:"pallet-return-form__group__input",type:"number",value:d,onChange:e=>{const t=e.target.value;m(t),E&&(E.inputValue=t)}}),(0,l.jsx)("button",{className:"pallet-return-form__group__btn btn",onClick:e=>{e.preventDefault();const t=parseFloat(E.tariff),s=parseFloat(d);if(isNaN(t)||isNaN(s))console.error("Ошибка: одно из значений не является числом"),f("");else{const e=t*s;f(new Intl.NumberFormat("ru-RU").format(e))}},children:"Обновить данные"})]})}),(0,l.jsxs)("div",{className:"pallet-return-form__group__desc",children:[(0,l.jsxs)("div",{className:"pallet-return-form__group__desc-ppt",children:[(0,l.jsxs)("p",{className:"pallet-return-form__group__desc-ppt__title",children:["PLN:",(0,l.jsx)("span",{className:"pallet-return-form__group__desc-ppt__title__subtitle",children:null==E?void 0:E.pln}),(0,l.jsx)("div",{className:"svg-markup",dangerouslySetInnerHTML:{__html:O},onClick:()=>T(null==E?void 0:E.pln)})]}),(0,l.jsxs)("p",{className:"pallet-return-form__group__desc-ppt__title",children:["РЦ:",(0,l.jsx)("span",{className:"pallet-return-form__group__desc-ppt__title__subtitle",children:null==E?void 0:E.rcs}),(0,l.jsx)("div",{className:"svg-markup",dangerouslySetInnerHTML:{__html:O},onClick:()=>T(null==E?void 0:E.rcs)})]}),(0,l.jsxs)("p",{className:"pallet-return-form__group__desc-ppt__title",children:["Тариф:",(0,l.jsxs)("span",{className:"pallet-return-form__group__desc-ppt__title__subtitle",children:[(0,l.jsx)("span",{className:"pallet-return-form__group__desc-ppt__title__subtitle__num",children:null==E?void 0:E.tariff}),"руб./паллета"]})]})]}),(0,l.jsxs)("div",{className:"pallet-return-form__group__desc-result",children:[(0,l.jsx)("p",{className:"pallet-return-form__group__desc-result__sum",children:"Стоимость возврата паллет:"}),(0,l.jsxs)("p",{className:"pallet-return-form__group__desc-result__res",children:[h," ",(0,l.jsx)("span",{className:"pallet-return-form__group__desc-result__res__subtitle",children:"₽"})]}),(0,l.jsxs)("p",{className:"pallet-return-form__group__desc-result__desc",children:["Рассчет стоимости возврата паллет ",(0,l.jsx)("br",{})," не является публичной оффертой."]})]})]})]}),(0,l.jsx)("div",{className:"under-line"}),(0,l.jsxs)("div",{className:"contact",children:[(0,l.jsx)("h2",{className:"contact__title",children:"Контактная информация"}),(0,l.jsxs)("form",{className:"contact__form",children:[(0,l.jsxs)("div",{className:"contact__form__input-group",children:[(0,l.jsx)("input",{type:"text",className:"contact__form__input",placeholder:"Название компании или ИНН",value:g,onChange:e=>v(e.target.value)}),(0,l.jsx)("input",{type:"text",className:"contact__form__input",placeholder:"Фамилия, имя, Отчество",value:x,onChange:e=>j(e.target.value)}),(0,l.jsx)("input",{type:"number",className:"contact__form__input",placeholder:"Телефон",value:N,onChange:e=>b(e.target.value)}),(0,l.jsx)("input",{type:"text",className:"contact__form__input",placeholder:"E-mail",value:w,onChange:e=>k(e.target.value)})]}),(0,l.jsx)("button",{onClick:e=>{e.preventDefault();const t=`\n      Добрый день! Поступила входящая заявка на возврат паллет:\n      •⁠  ⁠Регион: ${o}\n      •⁠  ⁠⁠Торговая сеть: ${i}\n      •⁠  ⁠⁠Точка возврата: ${u}\n      •⁠  ⁠⁠Объем отгружаемых паллет в месяц: ${d}\n  \n      Контактная информация:\n      •⁠  ⁠Компания (ИНН): ${g}\n      •⁠  ⁠⁠ФИО: ${x}\n      •⁠  ⁠⁠Телефон: ${N}\n      •⁠  ⁠⁠e-mail: ${w}\n    `,s={Subject:`Заявка на возврат паллет - ${(new Date).toLocaleDateString("ru-RU")}`,Body:t,Source:"Pooling",To:["sales@rcc-tara.ru"],Attachments:[{FileName:"Test.txt",ContentBase64:btoa("SGVsbG8sIGhvdyBhcmUgeW91Pw==")}]};fetch("https://api.ntf.devlogics.ru/api/v1/notifications/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.text()})).then((e=>{console.log("Response Text:",e);const t=e?JSON.parse(e):{};console.log("Success:",t),S(!0),setTimeout((()=>S(!1)),3e3)})).catch((e=>{console.error("Error:",e)}))},type:"submit",className:"contact__form__btn",children:"Отправить заявку"}),y&&(0,l.jsx)("div",{className:"contact__form__success-message",children:"Заявка отправлена"})]}),(0,l.jsx)("div",{className:"contact__desc",children:(0,l.jsxs)("span",{className:"contact__desc__subtitle",children:["Заполняя форму, я принимаю ",(0,l.jsx)("a",{href:"#!",className:"contact__desc__link",children:"условия"})," и даю ",(0,l.jsx)("a",{href:"#!",className:"contact__desc__link",children:"согласие на обработку персональных данных."})]})})]})]})})},c={region:"",tradingNetwork:"",returnPoint:null},i=function(){const[e,t]=(0,r.useState)(c);return(0,l.jsxs)("main",{className:"main",children:[(0,l.jsxs)("div",{className:"main__title",children:[(0,l.jsx)("h1",{className:"title",children:"Возврат паллет"}),(0,l.jsx)("h2",{className:"subtitle",children:"Калькулятор поможет рассчитать стоимость возврата паллет с учетом параметров точек отправки и возврата."})]}),(0,l.jsx)("form",{className:"pallet-return-form",children:(0,l.jsx)(o,{onChange:(e,s)=>{t((t=>Object.assign({},t,{[e]:s})))}})})]})},_=function(){return(0,l.jsx)("div",{children:(0,l.jsx)(i,{})})}},192:(e,t,s)=>{var r=s(418),a=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var r,c={},i=null,_=null;for(r in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(_=t.ref),t)l.call(t,r)&&!o.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:a,type:e,key:i,ref:_,props:c,_owner:n.current}}t.jsx=c,t.jsxs=c},540:(e,t,s)=>{e.exports=s(192)}}]);